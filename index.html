<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Gibbons Dart League">
  <link rel="apple-touch-icon" href="dart-icon.png">
  <title>Gibbons Dart League</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Roboto', Arial, sans-serif;
      background-color: #4A7043;
      color: #FFD700;
      text-align: center;
      min-height: 100vh;
      padding-bottom: 20px;
      margin-left: 260px;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100%;
      background-color: #f5e8c7;
      padding-top: 10px;
      overflow-y: auto;
      z-index: 10;
    }
    .logo {
      width: 150px;
      height: auto;
      margin-bottom: 10px;
    }
    .rules-link {
      display: block;
      margin: 10px auto;
      padding: 8px 15px;
      background-color: #f5e8c7;
      color: #FFD700;
      text-decoration: none;
      font-weight: 700;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
      font-size: 1em;
      border-radius: 5px;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
      cursor: pointer;
    }
    .rules-link:hover, .rules-link:focus {
      background-color: #e6d7a8;
      color: #4A7043;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 100;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: #4A7043;
      color: #FFD700;
      padding: 20px;
      border: 2px solid #FFD700;
      border-radius: 10px;
      max-width: 700px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    .modal-content h2 {
      margin-top: 0;
      text-shadow: 1px 1px #000;
    }
    .modal-content h3 {
      margin: 15px 0 10px;
      text-shadow: 1px 1px #000;
    }
    .modal-content table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9em;
      color: #FFD700;
    }
    .modal-content th, .modal-content td {
      padding: 8px;
      border-bottom: 1px solid #FFD700;
      text-align: left;
    }
    .modal-content th {
      font-weight: bold;
      color: #FFD700;
    }
    .modal-content td {
      font-weight: 700;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
    }
    .score-app-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #4A7043;
      z-index: 100;
      padding: 10px;
      -webkit-overflow-scrolling: touch;
    }
    .score-app-content {
      width: 100%;
      height: 100%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
    }
    .close-button {
      position: absolute;
      top: 15px;
      right: 15px;
      background-color: #FFD700;
      color: #4A7043;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      font-size: 16px;
      z-index: 1;
    }
    .close-button:hover, .close-button:focus {
      background-color: #e6c200;
    }
    .score-app-content #playerSelection {
      text-align: center;
      width: 90%;
      max-width: 400px;
    }
    .score-app-content #playerSelection h2 {
      margin-bottom: 20px;
      color: #FFD700;
      text-shadow: 1px 1px #000;
    }
    .score-app-content #playerSelection select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      background: linear-gradient(to bottom, #FFD700, #e6c200);
      color: #4A7043;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .score-app-content #startGame {
      width: 100%;
      padding: 12px;
      background: linear-gradient(to bottom, #FFD700, #e6c200);
      color: #4A7043;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      transition: transform 0.1s;
    }
    .score-app-content #startGame:active {
      transform: scale(0.98);
    }
    .score-app-content #scorekeeperUI {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .score-app-content #scorekeeperUI h1 {
      margin: 10px 0;
      font-size: 24px;
      color: #FFD700;
      text-shadow: 1px 1px #000;
    }
    .score-app-content .players {
      display: flex;
      justify-content: space-around;
      width: 100%;
      flex: 0 0 50vh;
      overflow-y: hidden;
      padding: 10px 0;
    }
    .score-app-content .player {
      text-align: center;
      background-color: rgba(255, 255, 255, 0.1);
      border: 2px solid #FFD700;
      padding: 10px;
      border-radius: 8px;
      width: 45%;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      cursor: pointer;
    }
    .score-app-content .player h2 {
      margin: 0 0 5px;
      font-size: 18px;
      color: #FFD700;
      text-shadow: 1px 1px #000;
      cursor: pointer;
    }
    .score-app-content .remaining {
      font-size: 2em;
      color: #FFD700;
      font-weight: bold;
      margin-bottom: 10px;
      cursor: pointer;
    }
    .score-app-content .ledger {
      list-style: none;
      padding: 0;
      color: #FFFDD0;
      font-size: 14px;
      flex: 1;
      overflow-y: auto;
      margin: 0;
    }
    .score-app-content .ledger li {
      margin: 3px 0;
    }
    .score-app-content .input-section {
      width: 100%;
      text-align: center;
      padding: 10px 0;
      background-color: rgba(0, 0, 0, 0.2);
      border-top: 1px solid #FFD700;
      flex: 0 0 50vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .score-app-content #scoreInput {
      font-size: 1.8em;
      width: 90%;
      max-width: 200px;
      margin: 0 auto 10px;
      padding: 10px;
      border: 1px solid #FFD700;
      border-radius: 8px;
      background-color: #FFFDD0;
      color: #4A7043;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .score-app-content .keypad-controls {
      display: flex;
      justify-content: space-between;
      width: 90%;
      max-width: 300px;
      margin: 0 auto 5px;
    }
    .score-app-content .keypad-controls button,
    .score-app-content .keypad button,
    .score-app-content .action-buttons button {
      font-size: 1.4em;
      padding: 12px;
      background: linear-gradient(to bottom, #FFD700, #e6c200);
      color: #4A7043;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      transition: transform 0.1s;
      font-weight: bold;
      min-width: 80px;
    }
    .score-app-content .keypad-controls button:active,
    .score-app-content .keypad button:active,
    .score-app-content .action-buttons button:active {
      transform: scale(0.95);
    }
    .score-app-content .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      margin: 0 auto;
      width: 90%;
      max-width: 300px;
    }
    .score-app-content .action-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
      width: 90%;
      margin: 10px auto 0;
    }
    .score-app-content .action-buttons button {
      flex: 1;
      margin: 0 5px;
    }
    .standings {
      text-align: left;
      padding: 0 10px;
    }
    .standings h2 {
      color: #FFD700;
      font-size: 1.5em;
      margin: 10px 0;
      text-shadow: 1px 1px #000;
    }
    .standings table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9em;
      color: #FFD700;
    }
    .standings th, .standings td {
      padding: 5px;
      border-bottom: 1px solid #FFD700;
      text-align: left;
    }
    .standings th {
      font-weight: bold;
      color: #FFD700;
    }
    .standings td {
      font-weight: 700;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
    }
    .standings td:first-child {
      width: 70%;
    }
    .standings td:last-child {
      width: 30%;
      text-align: right;
    }
    h1 {
      font-size: 3em;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin: 20px 0;
      text-shadow: 2px 2px #000;
      color: #FFD700;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px auto;
      width: 80%;
      max-width: 900px;
    }
    .gallery img {
      width: 200px;
      height: 150px;
      object-fit: cover;
      border: 3px solid #FFD700;
      border-radius: 10px;
      transition: transform 0.3s;
      loading: lazy;
      cursor: pointer;
    }
    .gallery img:hover {
      transform: scale(1.1);
    }
    .bracket {
      display: flex;
      flex-wrap: nowrap;
      justify-content: flex-start;
      gap: 20px;
      margin: 20px auto;
      width: 80%;
      max-width: 900px;
      padding-left: 20px;
      padding-right: 20px;
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
      min-height: 220px;
    }
    .bracket:hover .carousel-container {
      animation-play-state: paused;
    }
    .carousel-container {
      display: flex;
      flex-wrap: nowrap;
      width: calc(2 * 14 * (120px + 20px));
      animation: scroll 20s linear infinite;
    }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(-14 * (120px + 20px))); }
    }
    .player-card {
      width: 120px;
      height: 200px;
      perspective: 1000px;
      flex: 0 0 auto;
      min-width: 120px;
      cursor: pointer;
      position: relative;
      z-index: 15;
      display: block;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .player-card:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s ease;
      transform-style: preserve-3d;
    }
    .player-card:hover .card-inner, .card-inner.flipped {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border: 3px solid #FFD700;
      border-radius: 8px;
    }
    .card-front {
      background: #FFFDD0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card-front img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      border-radius: 6px;
      loading: lazy;
    }
    .card-back {
      background: #4A7043;
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #FFFDD0;
      font-size: 0.7em;
      padding: 5px;
      overflow-y: auto;
      border: 3px solid #FFD700;
      box-shadow: inset 0 0 0 2px #FFFDD0;
    }
    .card-back p {
      margin: 2px 0;
      white-space: normal;
      overflow: visible;
      text-overflow: ellipsis;
    }
    .bracket-frame, .schedule {
      margin: 20px auto;
      max-width: 900px;
      width: 80%;
      height: 550px;
      border: 2px solid #FFD700;
      border-radius: 10px;
      overflow: hidden;
    }
    .bracket-frame h2, .schedule h2 {
      color: #FFD700;
      text-shadow: 1px 1px #000;
      font-size: 1.5em;
      margin: 10px 0;
    }
    .bracket-frame iframe {
      width: calc(100% / 0.6);
      height: calc(100% / 0.6);
      transform: scale(0.6);
      transform-origin: top left;
      border: none;
      border-radius: 10px;
    }
    .schedule iframe {
      width: calc(100% / 0.8);
      height: calc(100% / 0.8);
      transform: scale(0.8);
      transform-origin: top left;
      border: none;
      border-radius: 10px;
    }
    @media (max-width: 768px) {
      body {
        margin-left: 0;
      }
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
      }
      .standings {
        padding: 0 20px;
      }
      .standings table {
        font-size: 1em;
      }
      .standings td {
        font-weight: 700;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
      }
      .rules-link {
        font-size: 1.1em;
        background-color: #f5e8c7;
        font-weight: 700;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
      }
      .rules-link:hover, .rules-link:focus {
        background-color: #e6d7a8;
        color: #4A7043;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
      }
      .modal-content {
        width: 95%;
        padding: 15px;
      }
      .score-app-modal {
        padding: 0;
      }
      .score-app-content {
        width: 100%;
        height: -webkit-fill-available;
      }
      .score-app-content .players {
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        flex: 0 0 40vh; /* Reduced for mobile */
        padding: 5px 0;
      }
      .score-app-content .player {
        width: 90%;
        margin-bottom: 10px;
        height: auto;
      }
      .score-app-content .remaining {
        font-size: 1.8em;
      }
      .score-app-content .ledger {
        max-height: 100px;
      }
      .score-app-content .input-section {
        flex: 1;
        justify-content: flex-start;
        overflow-y: auto; /* Scroll if keypad/buttons overflow */
        padding-bottom: 20px; /* Extra space at bottom */
      }
      .score-app-content .keypad-controls button,
      .score-app-content .keypad button,
      .score-app-content .action-buttons button {
        padding: 10px; /* Reduced for mobile fit */
        font-size: 1.2em;
        min-width: 70px;
      }
      .bracket {
        margin: 20px auto;
        padding: 0 10px;
        max-width: 100%;
        overflow-x: visible;
        overflow-y: auto;
        min-height: 1400px;
      }
      .carousel-container {
        animation: none;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        width: 100%;
      }
      .player-card {
        width: calc(50% - 10px);
        margin: 5px;
        display: block;
      }
      .bracket-frame, .schedule {
        height: 400px;
      }
      .bracket-frame iframe {
        transform: scale(0.5);
        width: calc(100% / 0.5);
        height: calc(100% / 0.5);
      }
      .schedule iframe {
        transform: scale(0.7);
        width: calc(100% / 0.7);
        height: calc(100% / 0.7);
      }
    }
    @supports (-webkit-touch-callout: none) {
      body {
        height: -webkit-fill-available;
      }
      .score-app-modal {
        height: -webkit-fill-available;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <img src="https://i.imgur.com/1UpyDVb.jpeg" alt="Gibbons Dart League Logo" class="logo" loading="lazy">
    <div class="rules">
      <a href="#" class="rules-link" role="button" tabindex="0" aria-label="Open rules pop-up">View Rules</a>
    </div>
    <div class="standings">
      <h2>League Standings</h2>
      <table>
        <thead>
          <tr>
            <th scope="col">Player</th>
            <th scope="col">Points</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Matt</td><td>0</td></tr>
          <tr><td>Greg</td><td>0</td></tr>
          <tr><td>Doug</td><td>0</td></tr>
          <tr><td>Dean</td><td>0</td></tr>
          <tr><td>Rob</td><td>0</td></tr>
          <tr><td>Ryan</td><td>0</td></tr>
          <tr><td>Colten</td><td>0</td></tr>
          <tr><td>Bry</td><td>0</td></tr>
          <tr><td>Mike</td><td>0</td></tr>
          <tr><td>Connor</td><td>0</td></tr>
          <tr><td>Spencer</td><td>0</td></tr>
          <tr><td>Jeremy</td><td>0</td></tr>
          <tr><td>Branden</td><td>0</td></tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal" id="rulesModal">
    <div class="modal-content">
      <button class="close-button" aria-label="Close rules pop-up">Close</button>
      <h2>Gibbons Dart League Rules</h2>
      <h3>Dates</h3>
      <ul>
        <li>Thursday, January 30th - 8pm</li>
        <li>Thursday, February 13th - 8pm</li>
        <li>Thursday, February 27th - 8pm</li>
        <li>Thursday, March 13th - 8pm</li>
        <li>Thursday, March 27th - 8pm</li>
        <li>Thursday, April 10th - 8pm</li>
        <li>Thursday, April 24th - 8pm</li>
        <li>Thursday, May 8th - 8pm</li>
        <li>Gibbons Dart League Championship
          <ul>
            <li>Saturday, May 10th - 6pm</li>
          </ul>
        </li>
      </ul>
      <h3>Rules/Format</h3>
      <ul>
        <li>Game played is 501</li>
        <li>Bullup to choose first throw</li>
        <li>Double out to end the game</li>
        <li>Each night will have a double elimination tournament that will award points based upon the player’s finishing position. Points awarded to first place will be equal to the number of participants, with each position decreasing by one point per spot.
          <ul>
            <li>i.e. if an 8 player tournament is played, the person coming in first receives 8 points, 2nd receives 7 points, 3rd receives 6 points… and so on</li>
          </ul>
        </li>
        <li>First round of tournament is 1 leg of 501, all matches beyond first round are best of 3 legs (first to two)</li>
        <li>Points awarded throughout the season are totaled to decide your ranking in the championship tournament at the end of the season.</li>
        <li>A player’s top 4 regular season tournament finishes will be used to decide player points and ranking.
          <ul>
            <li>i.e. if a player plays in 6 regular season tournaments and receives the following points for finishes (3, 6, 1, 8, 3, 5) the points used will be 8+6+5+3=23</li>
            <li>If two players finish with exactly the same amount of points, 1 leg of 501 will be played the day of the championship to decide on the order.</li>
          </ul>
        </li>
        <li>The championship tournament will be a double knockout elimination tournament
          <ul>
            <li>501, double out</li>
            <li>First round will be best of 3 legs (first to two), all following rounds will be a best of 5 legs (first to three)</li>
          </ul>
        </li>
      </ul>
      <h3>Cost and Payout</h3>
      <p>Cost to play: $10.00</p>
      <p>$10 each will go towards a trophy, the remaining $100 per player will be paid out as follows:</p>
      <h4>Regular Season</h4>
      <ul>
        <li>1st place finish (most points) in regular season - $150</li>
        <li>2nd place finish in regular season - $100</li>
        <li>3rd place finish in regular season - $50</li>
      </ul>
      <h4>Championship Tournament</h4>
      <ul>
        <li>1st place - all remaining money in pool</li>
        <li>2nd place - $200</li>
        <li>3rd place - $100</li>
      </ul>
    </div>
  </div>
  <div class="modal" id="barTabModal">
    <div class="modal-content">
      <button class="close-button" aria-label="Close Bar Tab pop-up">Close</button>
      <h2>Bar Tab</h2>
      <table>
        <thead>
          <tr>
            <th scope="col">Player</th>
            <th scope="col">Bar Tab Total</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Matt</td><td>$25.00</td></tr>
          <tr><td>Greg</td><td>$30.00</td></tr>
          <tr><td>Doug</td><td>$15.00</td></tr>
          <tr><td>Dean</td><td>$20.00</td></tr>
          <tr><td>Rob</td><td>$35.00</td></tr>
          <tr><td>Ryan</td><td>$10.00</td></tr>
          <tr><td>Colten</td><td>$40.00</td></tr>
          <tr><td>Bry</td><td>$22.00</td></tr>
          <tr><td>Mike</td><td>$18.00</td></tr>
          <tr><td>Connor</td><td>$27.00</td></tr>
          <tr><td>Spencer</td><td>$12.00</td></tr>
          <tr><td>Jeremy</td><td>$45.00</td></tr>
          <tr><td>Branden</td><td>$30.00</td></tr>
        </tbody>
      </table>
      <p>Please contact the league organizer to update or confirm bar tab amounts.</p>
    </div>
  </div>
  <div class="modal score-app-modal" id="scoreAppModal" role="dialog" aria-modal="true">
    <div class="score-app-content">
      <button class="close-button" aria-label="Close Dart Scorekeeping App">Close</button>
      <div id="playerSelection">
        <h2>Select Players</h2>
        <select id="player1Select" aria-label="Select Player 1">
          <option value="">Select Player 1</option>
        </select>
        <select id="player2Select" aria-label="Select Player 2">
          <option value="">Select Player 2</option>
        </select>
        <button id="startGame" role="button" aria-label="Start Game">Start Game</button>
      </div>
      <div id="scorekeeperUI" style="display: none;">
        <h1>Dart Scorekeeper</h1>
        <div class="players">
          <div class="player" id="player1">
            <h2 id="player1Name" role="button" tabindex="0" aria-label="Select Player 1's turn">Player 1</h2>
            <div class="remaining" role="button" tabindex="0" aria-label="Select Player 1's turn">501</div>
            <ul class="ledger"></ul>
          </div>
          <div class="player" id="player2">
            <h2 id="player2Name" role="button" tabindex="0" aria-label="Select Player 2's turn">Player 2</h2>
            <div class="remaining" role="button" tabindex="0" aria-label="Select Player 2's turn">501</div>
            <ul class="ledger"></ul>
          </div>
        </div>
        <div class="input-section">
          <input type="text" id="scoreInput" readonly placeholder="Enter score" maxlength="3" aria-label="Score input">
          <div class="keypad-controls">
            <button class="clear" role="button" aria-label="Clear score input">C</button>
            <button class="undo" role="button" aria-label="Undo last score">UNDO</button>
          </div>
          <div class="keypad">
            <button class="number" data-value="1" role="button" aria-label="Enter 1">1</button>
            <button class="number" data-value="2" role="button" aria-label="Enter 2">2</button>
            <button class="number" data-value="3" role="button" aria-label="Enter 3">3</button>
            <button class="number" data-value="4" role="button" aria-label="Enter 4">4</button>
            <button class="number" data-value="5" role="button" aria-label="Enter 5">5</button>
            <button class="number" data-value="6" role="button" aria-label="Enter 6">6</button>
            <button class="number" data-value="7" role="button" aria-label="Enter 7">7</button>
            <button class="number" data-value="8" role="button" aria-label="Enter 8">8</button>
            <button class="number" data-value="9" role="button" aria-label="Enter 9">9</button>
            <button class="number" data-value="0" role="button" aria-label="Enter 0">0</button>
            <button class="backspace" role="button" aria-label="Backspace">←</button>
            <button id="submitScore" role="button" aria-label="Submit score">ENTER</button>
          </div>
          <div class="action-buttons">
            <button id="switchPlayer" role="button" aria-label="Switch player">Switch</button>
            <button id="newGame" role="button" aria-label="Start new game">New Game</button>
            <button id="endGame" role="button" aria-label="End game">End Game</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id="statsModal">
    <div class="modal-content">
      <button class="close-button" aria-label="Close Advanced Stats pop-up">Close</button>
      <h2>Advanced Player Stats</h2>
      <table id="advancedStatsTable">
        <thead>
          <tr>
            <th scope="col">Player</th>
            <th scope="col">Games Played</th>
            <th scope="col">Wins</th>
            <th scope="col">Losses</th>
            <th scope="col">Win/Loss Ratio</th>
            <th scope="col">Avg Score/Turn</th>
            <th scope="col">PPD</th>
            <th scope="col">Best Throw</th>
            <th scope="col">180s</th>
          </tr>
        </thead>
        <tbody id="statsTableBody"></tbody>
      </table>
    </div>
  </div>
  <h1>Gibbons Dart League</h1>
  <section class="gallery">
    <img src="https://i.imgur.com/KmLsdSr.jpeg" alt="Match 1 action shot" aria-label="Open Bar Tab pop-up" class="bar-tab-link" loading="lazy">
    <img src="https://i.imgur.com/2NxeJiq.jpeg" alt="Match 2 action shot" aria-label="Open Dart Scorekeeping App" class="score-app-link" loading="lazy">
    <img src="https://i.imgur.com/C0ri683.jpeg" alt="Match 3 action shot" aria-label="Open Advanced Stats pop-up" class="stats-link" loading="lazy">
  </section>
  <section class="bracket">
    <div class="carousel-container">
      <div class="player-card" data-player-id="1" role="button" aria-label="View Matt's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/x2JiZbH.jpeg" alt="Matt's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Matt</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="2" role="button" aria-label="View Greg's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/JGDO9pF.jpeg" alt="Greg's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Greg</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="3" role="button" aria-label="View Doug's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/ang2XET.jpeg" alt="Doug's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Doug</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="4" role="button" aria-label="View Dean's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/HEuLD1y.jpeg" alt="Dean's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Dean</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="5" role="button" aria-label="View Rob's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://via.placeholder.com/120x180?text=Rob" alt="Rob's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Rob</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="6" role="button" aria-label="View Ryan's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://via.placeholder.com/120x180?text=Ryan" alt="Ryan's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Ryan</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="7" role="button" aria-label="View Colten's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/Dfp6oOU.jpeg" alt="Colten's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Colten</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="8" role="button" aria-label="View Bry's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/FgeQO53.jpeg" alt="Bry's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Bry</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="9" role="button" aria-label="View Mike's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/8LhE8et.jpeg" alt="Mike's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Mike</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="10" role="button" aria-label="View Connor's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/vDOeB15.jpeg" alt="Connor's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Connor</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="11" role="button" aria-label="View Spencer's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/4oNqDst.jpeg" alt="Spencer's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Spencer</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="12" role="button" aria-label="View Jeremy's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/uwYug71.jpeg" alt="Jeremy's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Jeremy</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="13" role="button" aria-label="View Branden's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/w6diWCs.jpeg" alt="Branden's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Branden</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
      <div class="player-card" data-player-id="14" role="button" aria-label="View Mouse's stats" tabindex="0">
        <div class="card-inner" aria-expanded="false">
          <div class="card-front">
            <img src="https://i.imgur.com/zCtU42b.jpeg" alt="Mouse's profile image" loading="lazy">
          </div>
          <div class="card-back">
            <p class="player-name">Mouse</p>
            <p class="player-wins">Wins: 0</p>
            <p class="player-avg-score">Avg Score: 0</p>
            <p class="player-win-loss">Win/Loss Ratio: 0/0</p>
            <p class="player-best-throw">Best Throw: 0</p>
            <p>Last Updated: 05:44 PM MDT, Saturday, August 23, 2025</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="bracket-frame">
    <h2>15-Person Tournament Bracket</h2>
    <iframe src="https://brackethq.com/b/hrzuc/embed/" loading="lazy"></iframe>
  </section>
  <section class="schedule">
    <h2>Match Schedule</h2>
    <iframe src="https://calendar.google.com/calendar/embed?src=gibbonsdartleague%40gmail.com&ctz=America%2FEdmonton" scrolling="no" loading="lazy"></iframe>
  </section>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const members = [
        { id: 1, name: 'Matt' },
        { id: 2, name: 'Greg' },
        { id: 3, name: 'Doug' },
        { id: 4, name: 'Dean' },
        { id: 5, name: 'Rob' },
        { id: 6, name: 'Ryan' },
        { id: 7, name: 'Colten' },
        { id: 8, name: 'Bry' },
        { id: 9, name: 'Mike' },
        { id: 10, name: 'Connor' },
        { id: 11, name: 'Spencer' },
        { id: 12, name: 'Jeremy' },
        { id: 13, name: 'Branden' },
        { id: 14, name: 'Mouse' }
      ];
      let currentPlayer = 'player1';
      let scores = { player1: [], player2: [] };
      let remaining = { player1: 501, player2: 501 };
      let lastPlayer = null;

      async function fetchPlayerStats() {
        try {
          const response = await fetch('https://dart-league-backend-8qlbyle11-brys-projects-719cd7a0.vercel.app/api/player-stats');
          if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
          const stats = await response.json();
          console.log('Fetched player stats:', stats);
          updatePlayerCards(stats);
          populateStatsModal(stats);
          return stats;
        } catch (err) {
          console.error('Error fetching player stats:', err.message);
          return [];
        }
      }

      function updatePlayerCards(stats) {
        const playerCards = document.querySelectorAll('.player-card');
        playerCards.forEach(card => {
          const playerId = parseInt(card.getAttribute('data-player-id'));
          const playerStats = stats.find(stat => stat.id === playerId);
          if (playerStats) {
            const cardBack = card.querySelector('.card-back');
            cardBack.querySelector('.player-name').textContent = playerStats.name;
            cardBack.querySelector('.player-wins').textContent = `Wins: ${playerStats.wins}`;
            cardBack.querySelector('.player-avg-score').textContent = `Avg Score: ${playerStats.avgScore}`;
            cardBack.querySelector('.player-win-loss').textContent = `Win/Loss Ratio: ${playerStats.winLossRatio}`;
            cardBack.querySelector('.player-best-throw').textContent = `Best Throw: ${playerStats.bestThrow}`;
          }
        });
      }

      function populateStatsModal(stats) {
        const statsTableBody = document.getElementById('statsTableBody');
        statsTableBody.innerHTML = '';
        stats.forEach(player => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${player.name}</td>
            <td>${player.gamesPlayed}</td>
            <td>${player.wins}</td>
            <td>${player.losses}</td>
            <td>${player.winLossRatio}</td>
            <td>${player.avgScore}</td>
            <td>${player.ppd}</td>
            <td>${player.bestThrow}</td>
            <td>${player.numberOf180s}</td>
          `;
          statsTableBody.appendChild(row);
        });
      }

      function populateSelects() {
        const player1Select = document.getElementById('player1Select');
        const player2Select = document.getElementById('player2Select');
        player1Select.innerHTML = '<option value="">Select Player 1</option>';
        player2Select.innerHTML = '<option value="">Select Player 2</option>';
        members.forEach(member => {
          const option = document.createElement('option');
          option.value = member.id;
          option.textContent = member.name;
          player1Select.appendChild(option.cloneNode(true));
          player2Select.appendChild(option);
        });
      }

      function loadMembers() {
        populateSelects();
      }

      function updateDisplay() {
        document.querySelector('#player1 .remaining').textContent = remaining.player1;
        document.querySelector('#player2 .remaining').textContent = remaining.player2;
        document.querySelector('#player1 .ledger').innerHTML = scores.player1.map(s => `<li>-${s}</li>`).join('');
        document.querySelector('#player2 .ledger').innerHTML = scores.player2.map(s => `<li>-${s}</li>`).join('');
        document.getElementById('player1').style.backgroundColor = currentPlayer === 'player1' ? 'rgba(255, 215, 0, 0.2)' : 'rgba(255, 255, 255, 0.1)';
        document.getElementById('player2').style.backgroundColor = currentPlayer === 'player2' ? 'rgba(255, 215, 0, 0.2)' : 'rgba(255, 255, 255, 0.1)';
      }

      function resetGame() {
        scores = { player1: [], player2: [] };
        remaining = { player1: 501, player2: 501 };
        currentPlayer = 'player1';
        lastPlayer = null;
        document.getElementById('scoreInput').value = '';
        updateDisplay();
        document.getElementById('playerSelection').style.display = 'block';
        document.getElementById('scorekeeperUI').style.display = 'none';
        loadMembers();
      }

      async function saveGame() {
        const winnerId = remaining.player1 === 0 ? window.player1Id : (remaining.player2 === 0 ? window.player2Id : null);
        const gameData = {
          player1Id: window.player1Id,
          player2Id: window.player2Id,
          scores: scores,
          winnerId: winnerId,
          date: new Date().toISOString()
        };

        // Save to localStorage (fallback)
        let savedGames = JSON.parse(localStorage.getItem('dartGames') || '[]');
        savedGames.push(gameData);
        localStorage.setItem('dartGames', JSON.stringify(savedGames));

        try {
          const response = await fetch('https://dart-league-backend-8qlbyle11-brys-projects-719cd7a0.vercel.app/api/games', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(gameData)
          });
          const data = await response.json();
          console.log('Game saved to backend:', data);
          alert('Game saved to backend! Message: ' + data.message);
          fetchPlayerStats();
        } catch (err) {
          console.error('Error saving to backend:', err);
          alert('Error saving to backend: ' + err.message);
        }
      }

      document.getElementById('startGame').addEventListener('click', () => {
        console.log('Start Game clicked');
        const p1Id = document.getElementById('player1Select').value;
        const p2Id = document.getElementById('player2Select').value;
        if (!p1Id || !p2Id || p1Id === p2Id) {
          alert('Please select two different players.');
          return;
        }
        const p1Name = members.find(m => m.id == p1Id).name;
        const p2Name = members.find(m => m.id == p2Id).name;
        document.getElementById('player1Name').textContent = p1Name;
        document.getElementById('player2Name').textContent = p2Name;
        document.getElementById('playerSelection').style.display = 'none';
        document.getElementById('scorekeeperUI').style.display = 'flex';
        window.player1Id = parseInt(p1Id);
        window.player2Id = parseInt(p2Id);
        updateDisplay();
      });

      const player1Elements = [
        document.querySelector('#player1 h2'),
        document.querySelector('#player1 .remaining')
      ].filter(el => el);
      const player2Elements = [
        document.querySelector('#player2 h2'),
        document.querySelector('#player2 .remaining')
      ].filter(el => el);

      player1Elements.forEach(el => {
        el.addEventListener('click', () => {
          console.log('Player 1 selected');
          currentPlayer = 'player1';
          updateDisplay();
        });
        el.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            currentPlayer = 'player1';
            updateDisplay();
          }
        });
      });

      player2Elements.forEach(el => {
        el.addEventListener('click', () => {
          console.log('Player 2 selected');
          currentPlayer = 'player2';
          updateDisplay();
        });
        el.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            currentPlayer = 'player2';
            updateDisplay();
          }
        });
      });

      document.querySelectorAll('.score-app-content .keypad .number').forEach(btn => {
        btn.addEventListener('click', () => {
          console.log('Number button clicked:', btn.dataset.value);
          const input = document.getElementById('scoreInput');
          if (input.value.length < 3) {
            input.value += btn.dataset.value;
          }
        });
      });

      const backspaceBtn = document.querySelector('.score-app-content .keypad .backspace');
      if (backspaceBtn) {
        backspaceBtn.addEventListener('click', () => {
          console.log('Backspace button clicked');
          const input = document.getElementById('scoreInput');
          if (input) input.value = input.value.slice(0, -1);
        });
      }

      const clearBtn = document.querySelector('.score-app-content .keypad-controls .clear');
      if (clearBtn) {
        clearBtn.addEventListener('click', () => {
          console.log('Clear button clicked');
          const input = document.getElementById('scoreInput');
          if (input) input.value = '';
        });
      }

      const undoBtn = document.querySelector('.score-app-content .keypad-controls .undo');
      if (undoBtn) {
        undoBtn.addEventListener('click', () => {
          console.log('Undo button clicked: currentPlayer=', currentPlayer, 'lastPlayer=', lastPlayer, 'scores=', scores);
          if (scores[currentPlayer].length > 0) {
            const lastScore = scores[currentPlayer].pop();
            remaining[currentPlayer] += lastScore;
            updateDisplay();
          } else if (lastPlayer !== null && scores[lastPlayer].length > 0) {
            const lastScore = scores[lastPlayer].pop();
            remaining[lastPlayer] += lastScore;
            currentPlayer = lastPlayer;
            lastPlayer = currentPlayer === 'player1' ? 'player2' : 'player1';
            updateDisplay();
          }
        });
      }

      const submitScoreBtn = document.getElementById('submitScore');
      if (submitScoreBtn) {
        submitScoreBtn.addEventListener('click', () => {
          console.log('Submit Score button clicked');
          const input = document.getElementById('scoreInput');
          if (!input) return;
          const score = parseInt(input.value);
          if (isNaN(score) || score < 0 || score > 180) {
            alert('Invalid score (0-180)');
            return;
          }
          const newRemaining = remaining[currentPlayer] - score;
          if (newRemaining < 0) {
            alert('Bust! Score not subtracted.');
            input.value = '';
            return;
          }
          scores[currentPlayer].push(score);
          remaining[currentPlayer] = newRemaining;
          if (newRemaining === 0) {
            alert(`${currentPlayer === 'player1' ? document.getElementById('player1Name').textContent : document.getElementById('player2Name').textContent} wins!`);
            input.value = '';
            updateDisplay();
            return;
          }
          lastPlayer = currentPlayer;
          currentPlayer = currentPlayer === 'player1' ? 'player2' : 'player1';
          input.value = '';
          updateDisplay();
        });
      }

      const switchPlayerBtn = document.getElementById('switchPlayer');
      if (switchPlayerBtn) {
        switchPlayerBtn.addEventListener('click', () => {
          console.log('Switch Player button clicked');
          lastPlayer = currentPlayer;
          currentPlayer = currentPlayer === 'player1' ? 'player2' : 'player1';
          updateDisplay();
        });
      }

      const newGameBtn = document.getElementById('newGame');
      if (newGameBtn) {
        newGameBtn.addEventListener('click', () => {
          console.log('New Game button clicked');
          resetGame();
        });
      }

      const endGameBtn = document.getElementById('endGame');
      if (endGameBtn) {
        endGameBtn.addEventListener('click', () => {
          console.log('End Game button clicked');
          saveGame();
          document.getElementById('scoreAppModal').style.display = 'none';
          resetGame();
        });
      }

      // Rules modal functionality
      const rulesLink = document.querySelector('.rules-link');
      const rulesModal = document.querySelector('#rulesModal');
      const rulesCloseButton = document.querySelector('#rulesModal .close-button');

      const openRulesModal = () => {
        console.log('Rules link clicked');
        rulesModal.style.display = 'flex';
        rulesCloseButton.focus();
      };

      const closeRulesModal = () => {
        console.log('Rules modal closed');
        rulesModal.style.display = 'none';
        rulesLink.focus();
      };

      rulesLink.addEventListener('click', e => {
        e.preventDefault();
        openRulesModal();
      });
      rulesLink.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openRulesModal();
        }
      });

      rulesCloseButton.addEventListener('click', closeRulesModal);
      rulesModal.addEventListener('click', e => {
        if (e.target === rulesModal) {
          closeRulesModal();
        }
      });

      // Bar Tab modal functionality
      const barTabLink = document.querySelector('.bar-tab-link');
      const barTabModal = document.querySelector('#barTabModal');
      const barTabCloseButton = document.querySelector('#barTabModal .close-button');

      const openBarTabModal = () => {
        console.log('Bar Tab link clicked');
        barTabModal.style.display = 'flex';
        barTabCloseButton.focus();
      };

      const closeBarTabModal = () => {
        console.log('Bar Tab modal closed');
        barTabModal.style.display = 'none';
        barTabLink.focus();
      };

      barTabLink.addEventListener('click', e => {
        e.preventDefault();
        openBarTabModal();
      });
      barTabLink.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openBarTabModal();
        }
      });

      barTabCloseButton.addEventListener('click', closeBarTabModal);
      barTabModal.addEventListener('click', e => {
        if (e.target === barTabModal) {
          closeBarTabModal();
        }
      });

      // Advanced Stats modal functionality
      const statsLink = document.querySelector('.stats-link');
      const statsModal = document.querySelector('#statsModal');
      const statsCloseButton = document.querySelector('#statsModal .close-button');

      const openStatsModal = () => {
        console.log('Stats link clicked');
        statsModal.style.display = 'flex';
        statsCloseButton.focus();
      };

      const closeStatsModal = () => {
        console.log('Stats modal closed');
        statsModal.style.display = 'none';
        statsLink.focus();
      };

      statsLink.addEventListener('click', e => {
        e.preventDefault();
        openStatsModal();
      });
      statsLink.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openStatsModal();
        }
      });

      statsCloseButton.addEventListener('click', closeStatsModal);
      statsModal.addEventListener('click', e => {
        if (e.target === statsModal) {
          closeStatsModal();
        }
      });

      // Scorekeeping App modal functionality
      const scoreAppLink = document.querySelector('.score-app-link');
      const scoreAppModal = document.querySelector('#scoreAppModal');
      const scoreAppCloseButton = document.querySelector('#scoreAppModal .close-button');

      const openScoreAppModal = () => {
        console.log('Score App link clicked');
        scoreAppModal.style.display = 'block';
        scoreAppCloseButton.focus();
        loadMembers();
        updateDisplay();
      };

      const closeScoreAppModal = () => {
        console.log('Score App modal closed');
        if (confirm('Are you sure? Unsaved game will be lost.')) {
          scoreAppModal.style.display = 'none';
          resetGame();
          scoreAppLink.focus();
        }
      };

      scoreAppLink.addEventListener('click', e => {
        e.preventDefault();
        openScoreAppModal();
      });
      scoreAppLink.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openScoreAppModal();
        }
      });

      scoreAppCloseButton.addEventListener('click', closeScoreAppModal);
      scoreAppModal.addEventListener('click', e => {
        if (e.target === scoreAppModal) {
          closeScoreAppModal();
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          if (rulesModal.style.display === 'flex') {
            closeRulesModal();
          }
          if (barTabModal.style.display === 'flex') {
            closeBarTabModal();
          }
          if (scoreAppModal.style.display === 'block') {
            closeScoreAppModal();
          }
          if (statsModal.style.display === 'flex') {
            closeStatsModal();
          }
        }
      });

      // Card flip functionality with accessibility
      document.querySelectorAll('.player-card').forEach(card => {
        const inner = card.querySelector('.card-inner');
        const toggleFlip = () => {
          console.log('Player card clicked');
          inner.classList.toggle('flipped');
          inner.setAttribute('aria-expanded', inner.classList.contains('flipped'));
        };
        card.addEventListener('click', toggleFlip);
        card.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleFlip();
          }
        });
      });

      // Seamless carousel loop for desktop only
      const carousel = document.querySelector('.carousel-container');
      const cards = document.querySelectorAll('.player-card');
      if (window.innerWidth > 768) {
        cards.forEach(card => {
          const clone = card.cloneNode(true);
          carousel.appendChild(clone);
          const inner = clone.querySelector('.card-inner');
          const toggleFlip = () => {
            console.log('Cloned player card clicked');
            inner.classList.toggle('flipped');
            inner.setAttribute('aria-expanded', inner.classList.contains('flipped'));
          };
          clone.addEventListener('click', toggleFlip);
          clone.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              toggleFlip();
            }
          });
        });
      }

      carousel.addEventListener('animationiteration', () => {
        if (window.innerWidth > 768) {
          carousel.style.transition = 'none';
          carousel.style.transform = 'translateX(0)';
          void carousel.offsetWidth; // Trigger reflow
          carousel.style.transition = 'transform 20s linear';
        }
      });

      fetchPlayerStats(); // Initial fetch for stats
    });
  </script>
</body>
</html>